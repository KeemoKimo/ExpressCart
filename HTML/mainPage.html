<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/ExpressCart/CSS/general.css">
    <link rel="stylesheet" href="/ExpressCart/CSS/mainPage.css">
    <link rel="stylesheet" href="/ExpressCart/CSS/itemTileStyle.css">
    <script src="/JS/itemTile.js"></script>
    <script src="/JS/userProfile.js"></script>
    <script>

        function openSellPage() {
            const urlParams = new URLSearchParams(window.location.search).get("userName");
            window.location.href = "addItemPage.html?userName=" + urlParams;
        }

        function openProfilePage() {
            const urlParams = new URLSearchParams(window.location.search).get("userName");
            window.location.href = "userProfilePage.html?userName=" + urlParams;
        }

        document.addEventListener('DOMContentLoaded', function () {
            const urlParams = new URLSearchParams(window.location.search).get('userName');

            fetch(`api/getUserData?userName=${encodeURIComponent(urlParams)}`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById("imgProfile").src = data.profileimg;
                });

            fetchItems(urlParams, 5);

            document.getElementById("frmUploadImage").action = `/api/uploadImage?userName=${urlParams}`;
        });
    </script>
    <title>Main</title>
</head>

<body>
    <div id="navBar">
        <h1 id="lblLogo">expressCart.</h1>
        <div id="searchContainer">
            <select name="categories" id="cmbCategories">
                <option value="carsAndVehicle">Cars & Vehicles</option>
                <option value="phonesAndTablet">Phones & Tablets</option>
                <option value="computersAndAccessories">Computers & Accessories</option>
                <option value="electronicsAndAppliances">Electronics & Appliances</option>
                <option value="realEstate">Real Estate</option>
                <option value="fashionAndBeauty">Fashion & Beauty</option>
                <option value="furnitureAndDecor">Furniture & Decor</option>
                <option value="books">Books</option>
                <option value="sportsAndHobbies">Sports & Hobbies</option>
                <option value="healthAndWellness">Health & Wellness</option>
                <option value="allCategories" selected>All Categories</option>
            </select>
            <input type="text" placeholder="What are you looking for today ...." id="txtItems">
        </div>
        <button id="btnSell" onclick="openSellPage()">Sell</button>
        <img src="" alt="" id="imgProfile" onclick="openProfilePage()">
    </div>
    <div id="categoriesDiv">
        <div id="topCategoryDiv">
            <div class="categoryBlock" id="categoryCars">
                <img src="https://cdn-icons-png.flaticon.com/512/2555/2555021.png" alt="" class="imgCategory">
                <p>Cars & Vehicles</p>
            </div>
            <div class="categoryBlock" id="categoryPhones">
                <img src="https://cdn-icons-png.flaticon.com/512/1661/1661391.png" alt="" class="imgCategory">
                <p>Phones & Tablets</p>
            </div>
            <div class="categoryBlock" id="categoryComputers">
                <img src="https://cdn-icons-png.flaticon.com/512/3655/3655772.png" alt="" class="imgCategory">
                <p>Computers & Accessories</p>
            </div>
            <div class="categoryBlock" id="categoryElectronics">
                <img src="https://cdn-icons-png.flaticon.com/512/997/997497.png" alt="" class="imgCategory">
                <p>Electronics & Appliances</p>
            </div>
            <div class="categoryBlock" id="categoryRealEstate">
                <img src="https://cdn-icons-png.flaticon.com/512/7403/7403321.png" alt="" class="imgCategory">
                <p>Real Estate</p>
            </div>
        </div>
        <div id="bottomCategoryDiv">
            <div class="categoryBlock" id="categoryFashion">
                <img src="https://cdn-icons-png.flaticon.com/512/3082/3082008.png" alt="" class="imgCategory">
                <p>Fashion & Beauty</p>
            </div>
            <div class="categoryBlock" id="categoryFurniture">
                <img src="https://cdn-icons-png.flaticon.com/512/5540/5540319.png" alt="" class="imgCategory">
                <p>Furniture & Decor</p>
            </div>
            <div class="categoryBlock" id="categoryBooks">
                <img src="https://cdn-icons-png.flaticon.com/512/3232/3232369.png" alt="" class="imgCategory">
                <p>Books</p>
            </div>
            <div class="categoryBlock" id="categorySports">
                <img src="https://cdn-icons-png.flaticon.com/512/857/857455.png" alt="" class="imgCategory">
                <p>Sports & Hobbies</p>
            </div>
            <div class="categoryBlock" id="categoryHealth">
                <img src="https://cdn-icons-png.flaticon.com/512/2869/2869749.png" alt="" class="imgCategory">
                <p>Health & Wellness</p>
            </div>
        </div>
    </div>
    <h1 id="lblYourItems">Your Items</h1>
    <div class="itemContainer" id="yourItemsContainer">
    </div>

    <div id="divider">
    </div>
    <h1 id="lblAllListedItems">All Listed Items Items</h1>

    <div id="allItemContainer">
    </div>
    <div id="bottomButtonWrapper">
        <button id="btnViewAll">View All Items</button>
    </div>
</body>
<footer>
    <h2><b>Express Cart</b> developed and maintained by Bunthong Kong Â©</h2>
</footer>

</html>